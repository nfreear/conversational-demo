<!doctype html> <title> Conversational-form â€” basic </title>

<style>
  form { font: 1.1rem sans-serif; margin: 0 auto; max-width: 36rem; padding: 1rem; }
  button, input, textarea, select { border: 1px solid #aaa; font-size: 1.1rem; min-width: 16rem; padding: .5rem; }

  .conversational-form { border-radius: .5rem; min-height: 300px; }
</style>


<form id="cf-form-0" data-X-cf-form >

  <h1> Conversational-form &mdash; basic </h1>

  <cf-robot-message cf-questions="Greetings ... !" />
  <cf-robot-message cf-questions="I'm a 'conversational-form' ..." />
  <cf-robot-message cf-questions="I've got some questions for you. Let's begin" />

  <p><label for="f-name"> What is your name? </label>
  <p><input id="f-name" name="Name" required cf-input-placeholder="Your name ..." />

  <p><label for="f-email"> What is your email address? </label>
  <p><input id="f-email" name="Email" type="email" placeholder="joe.bloggs@example.com" />

  <p><label for="f-file"> Do you want to upload an image? </label>
  <p><input id="f-file" name="File" type="file" accept="image/*" placeholder="./Image.jpg" />

  <!--
  <p><label for="f-tel"> What is your phone number? </label>
  <p><input id="f-tel" name="Tel" type="tel" placeholder="0123 456789" />

  <p><label for="f-date"> What is today's date? </label>
  <p><input id="f-date" name="Date" type="date" pattern="\d{4}-\d{2}-\d{2}" aria-label="Format: Year-MM-DD" title="Format: Year-MM-DD" />
  -->

  <p><label for="f-hobbies"> Can you tell me about your hobbies? </label>
  <p><textarea id="f-hobbies" name="Hobbies"></textarea>

  <p><label id="f-select"> Which of these best describes you? </label>
  <p><select id="f-select" name="Select" multiple="true">
        <option> I'm outgoing </option>
        <option> I'm reflective </option>
        <option> I'm noisy </option>
        <option> I'm nervous </option>
        <option> I want to party! </option>
      </select>

  <p><button type="submit" name="Button">Submit</button>

  <cf-robot-message cf-questions="Thank you!" />

</form>


<!-- ConversationalForm -->
<script src="https://unpkg.com/conversational-form@1.0.2/dist/conversational-form.min.js" crossorigin ></script>
<!-- End of ConversationalForm -->


<script>
(function cfLaunch (DOC, LOC) {

  const $HTML_FORM_ELEMENT = DOC.querySelector('#cf-form-0');
  const $FORM_INPUTS = [...DOC.forms[0].elements];

  $HTML_FORM_ELEMENT.addEventListener('submit', EV => {
    EV.preventDefault();

    console.warn('>> Form submit event:', EV)

    const VALUES = $FORM_INPUTS.map(elem => { return { f: elem.name, v: elem.value || null } });

    console.warn('  > Form data:', VALUES);

    // $FORM_INPUTS.forEach(elem => console.warn(`  > ${ elem.name } := '${ elem.value }'`));
  });

  if (LOC.href.match(/disable=cf/)) {
    return console.warn('>> Conversation-form disabled!');
  }

  const CF_DISPATCHER = new cf.EventDispatcher();

  CF_DISPATCHER.addEventListener(cf.FlowEvents.USER_INPUT_INVALID, EV => {
    console.error('Invalid input:', EV);

    const ORIG_EL = EV.detail.tag.domElement;
    const CHAT_EL = EV.detail.input.el;

    CHAT_EL.title = `Sorry. I'm expecting for example: ${ ORIG_EL.placeholder }.`;
  });

  const CF = new cf.ConversationalForm({
    formEl: $HTML_FORM_ELEMENT,
    eventDispatcher: CF_DISPATCHER,
    theme: 'dark',
    suppressLog: false,
    // submitCallback: EV => console.warn('>> CF.submitCallback:', EV),
    // tags: [ { tag: 'input', type: 'text', value: 'Pre-filled ..', 'cf-label': 'Label ..' } ],
  });

})(window.document, window.location);
</script>


<pre>

Nick Freear / 16-Jan-2020.

 * https://gist.github.com/nfreear/a2168d0b0a9d592910e8c5abbfa4e94b
 * https://space10-community.github.io/conversational-form/
 * https://github.com/space10-community/conversational-form

</pre>
